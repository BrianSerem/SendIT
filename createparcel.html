<!DOCTYPE html >

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Send Parcel</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link href="images/senditlogo/senditfav.png" rel="icon" type="image/png">
    <link href="http://fonts.googleapis.com/css?family=Varela" rel="stylesheet" />
    <link href="css/default.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/forms.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/fonts.css" rel="stylesheet" type="text/css" media="all" />
</head>

<body>
    <div id="wrapper">
        <div id="header-wrapper">
            <div id="header" class="container">
                <div id="logo">
                    <h1><a href="index.html"><img src="images/senditlogo/senditfav.png"></a></h1>
                </div>
                <div id="menu">
                    <ul>
                        <li><a href="index.html" accesskey="1" title="">HOME</a></li>
                        <li class="current_page_item"><a href="createparcel.html" accesskey="2" title="">CREATE</a><li>
                        <li><a href="about.html" accesskey="4" title="">About Us</a></li>
                        <li><a href="userdashboard.html" accesskey="5" title="">Dashboard</a></li>
                        <li><a href="about.html" accesskey="4" title="">LOG OUT</a></li>
                        <li><a href="profile.html" accesskey="4" title="">username</a></li>
                        <li><a href="profile.html"><img src="images/user.png"></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="extra" class="container">
        <div id="three-column">
            <div class="boxA">
                <div class="box"> <span class=""></span>
                    <h2>1. ENTER DETAILS</h2>
                    <p>Enter parcel details in the formfields below</p>
                </div>
            </div>
            <div class="boxB">
                <div class="box"> <span class=""></span>
                    <h2>2.CONFIRM !!</h2>
                    <p>Confirm the details, you can edit these later!!</p>
                </div>
            </div>
            <div class="boxC">
                <div class="box"> <span class=""></span>
                    <h2>3.send!!!</h2>
                    <p>Click SEND PARCEL and your parcel will be on its way.</p>
                </div>
            </div>
        </div>
        <div class="createparcel">
  <h1>SEND PARCEL</h1>
    <form method="post">
        <input type="textarea" name="u" placeholder="Description" required="required" id = "description" />
        <input type="number" name="p"  placeholder="weight" required="required" id = "weight" />
        <input type="text" name="u" placeholder="Origin" required="required" id = "origin" />
        <input type="text" name="u" placeholder="Destination" required="required" id = "destination" />
        <button type="submit" onclick="createParcel()"  class="btn btn-primary btn-block btn-large">SEND PARCEL.</button>
    </form>
    <div id="response"></div>
  
</div>

  <script>
    function createParcel(){

      let description = document.getElementById("description").value;
      let weight = document.getElementById("weight").value;
      let origin = document.getElementById("origin").value;
      let destination = document.getElementById("destination").value;
      let createparcel_url = "https://sendit123.herokuapp.com/api/v2/parcels";
      let parcel_data = {
            name : description,
            weight : weight,
            origin : origin,
            destination : destination
        }
    fetch(createparcel_url, {
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer " + localStorage.token
    },
    method: "POST",
    body: JSON.stringify(parcel_data)
  })
    .then(resp => {
      return resp.json();
    })
    .then(data => {
      window.location.href='userdashboard.html'
      console.log(data);
    })
    .catch(error => {
      console.log(error);
    });
};
  </script>
  
</body>

</html>